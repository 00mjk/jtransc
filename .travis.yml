language: java
node_js:
- '4'
jdk:
- oraclejdk8
before_install:
- sudo apt-get update -qq
install:
- sudo add-apt-repository ppa:ondrej/php -y
- sudo apt-get -y update
- sudo apt-get -y install php5.6 php5.6-mbstring
- mvn clean --settings settings.xml
- nvm install 4 || true
- nvm use 4 || true
before_script:
- ls -la $PWD
- which java || true
- java -version || true
- which nvm || true
- nvm --version || true
- which node || true
- node --version || true
- php --version || true
script:
- mvn install --settings settings.xml
- pushd jtransc-main-run/example
- "./run && node program.js"
- popd
- pushd jtransc-main-run/example-gradle
- gradle runJs && node build/program.js
- popd
cache:
  directories:
  - "$HOME/.m2"
  - "$HOME/.gradle"
notifications:
  irc:
    channels:
    - chat.freenode.net#jtransc
    on_success: never
    on_failure: always
  slack:
    rooms:
      secure: fDqxbvhCKZqXrl6oCcgsAUQQmjcUO3jaakR6pE3rY2GjUcwv7gFPA3VJNYBDe6EEq9nyYA4xJC+8IY/6OPm9kZh8/MLdosiJ7X2+FBo90Eo1hIpPAsJ8Vb5V1dY8jO7Luv2Drd+kwkwtNtLDxbdL3YOuAITYtKehQa1KRhkMuqIu4yFd5yApTzynsyBRypo0Hn4wTXCgB6s1Ch/TCuDDCAaHvPE5nXuJkhRvuZXI04EjpK/WIy2GK4VdYxojy+s6GMrhg++VjgzJuZvIbgkYb8ks5LmlCnK6DI96zSYes6L+ExWPVeUnMDMEH6M+9313I9d7nQBjO4z/Fk11W19KDQ6Z5CM7knm8n7mQ/CVF9vat1xo131ZvDYBzxT5zBzo6jaGYGE7CAdryfF/Gs3IUyWDKSJiBPa3FXhErVsg80sqQ+hK48a1hqh+RnsQ6wsH7y/cJBAQNf2c+Q/IFdpIIUu2a+iFEPTfco+U0DPfxQIaVjoGVIBCHE+E1jRTK0IeEqwxog03Cwcjq20FDhhnaiFYIRURjwDs+gWWpmBRDI1yi7+WAQzis0yoeapsan5/B9km2mEQqQnirL8zMNv4rJ/Ra6PgSmXs/GpYe1yjXa30SZSa4NKY/ySodYNZ3iMPSyocTrA0uC2d9/WhSZAIC9Av3VHg1Zh34sNBDX1S32w0=
    on_success: never
    on_failure: always
    on_start: never
